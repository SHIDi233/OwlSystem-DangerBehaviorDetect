{"ast":null,"code":"import \"core-js/modules/web.url-search-params.size.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      dialogTableVisible: false,\n      deleteDialogTableVisible: false,\n      addDialogTableVisible: false,\n      confirmDelete: false,\n      selectedCid: '',\n      cameraID: '',\n      cameras: [],\n      members: [],\n      deleteParams: {\n        cID: '',\n        uID: ''\n      },\n      addParams: {\n        cID: '',\n        mail: ''\n      }\n    };\n  },\n  methods: {\n    async search() {\n      if (this.cameraID === '') {\n        try {\n          const response = await axios.get(\"http://116.204.11.171:8080/cameras\");\n          this.cameras = response.data.data;\n          console.log(this.cameras);\n          this.cameraID = '';\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    },\n    async viewMembers(row) {\n      // 在这里访问 row 对象，执行查看成员的操作\n      console.log('查看成员', row);\n      try {\n        const response = await axios.get(\"http://116.204.11.171:8080/members\", {\n          params: {\n            cID: row.cid\n          }\n        });\n        this.members = response.data.data;\n        this.dialogTableVisible = true;\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    showAddMemberDialog(row) {\n      this.addDialogTableVisible = true;\n      this.addParams.cID = row.cid;\n      console.log(this.addParams);\n    },\n    async addMember() {\n      // 在这里访问 row 对象，执行添加成员的操作\n      console.log('添加成员');\n      console.log(this.addParams);\n      var params = new URLSearchParams();\n      params.append(\"cID\", this.addParams.cID);\n      params.append(\"mail\", this.addParams.mail);\n      try {\n        const response = await axios.post(\"http://116.204.11.171:8080/addMember\", params);\n        if (response.data.code === 1) {\n          alert(\"添加成功\");\n          this.addParams = {\n            cID: '',\n            mail: ''\n          };\n        } else {\n          alert(\"添加失败\" + response.data.msg);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    addCancel() {\n      this.addDialogTableVisible = false;\n    },\n    async showDeleteDialog(row) {\n      this.deleteDialogTableVisible = true;\n      this.deleteParams.cID = row.cid;\n      console.log(this.members);\n      try {\n        const response = await axios.get(\"http://116.204.11.171:8080/members\", {\n          params: {\n            cID: row.cid\n          }\n        });\n        this.members = response.data.data;\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    async deleteMember(row) {\n      // 在这里访问 row 对象，执行删除成员的操作\n      console.log('删除成员', row);\n      this.deleteParams.uID = row.uid;\n      console.log(this.deleteParams);\n      try {\n        const response = await axios.delete(\"http://116.204.11.171:8080/delMember\", {\n          params: {\n            cID: this.deleteParams.cID,\n            uID: this.deleteParams.uID\n          }\n        });\n        if (response.data.code === 1) {\n          alert(\"删除成功\");\n        } else {\n          alert(\"删除失败\");\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  },\n  created() {\n    this.search();\n  }\n};","map":{"version":3,"names":["axios","data","dialogTableVisible","deleteDialogTableVisible","addDialogTableVisible","confirmDelete","selectedCid","cameraID","cameras","members","deleteParams","cID","uID","addParams","mail","methods","search","response","get","console","log","e","error","viewMembers","row","params","cid","showAddMemberDialog","addMember","URLSearchParams","append","post","code","alert","msg","addCancel","showDeleteDialog","deleteMember","uid","delete","created"],"sources":["src/components/cameraManage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-card class=\"box-card\">\r\n      <el-row>\r\n        <el-col :span=\"12\"><div class=\"grid-content bg-purple\">\r\n          <div style=\"margin-top: 15px;\">\r\n            <el-input placeholder=\"请输入内容\" v-model=\"input3\" class=\"input-with-select\">\r\n<!--              <el-button slot=\"append\" icon=\"el-icon-search\"></el-button>-->\r\n            </el-input>\r\n          </div></div></el-col>\r\n        <el-col :span=\"12\"><div class=\"grid-content bg-purple-light\">\r\n          <el-button style=\"float: right; \"  @click=\"search\" type=\"primary\" round>搜索</el-button>\r\n        </div></el-col>\r\n      </el-row>\r\n    </el-card>\r\n    <el-card class=\"box-card\">\r\n      <el-table\r\n          :data=\"cameras\"\r\n          style=\"width: 100%\">\r\n        <el-table-column\r\n            prop=\"cid\"\r\n            label=\"摄像头编号\"\r\n            width=\"200\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"content\"\r\n            label=\"描述\"\r\n            width=\"300\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"addr\"\r\n            label=\"摄像头地址\"\r\n            width=\"200\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"owner\"\r\n            label=\"是否具有管理权限\"\r\n            width=\"200\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.owner ? '是' : '否' }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column>\r\n          <template slot-scope=\"scope\">\r\n            <el-button-group>\r\n            <el-button type=\"primary\" icon=\"el-icon-search\" v-show=\"scope.row.owner\" @click=\"viewMembers(scope.row)\">查看成员</el-button>\r\n            <el-button type=\"primary\" icon=\"el-icon-edit\" v-show=\"scope.row.owner\" @click=\"showAddMemberDialog(scope.row)\">添加成员</el-button>\r\n            <el-button type=\"primary\" icon=\"el-icon-delete\" v-show=\"scope.row.owner\" @click=\"showDeleteDialog(scope.row)\">删除成员</el-button>\r\n            </el-button-group>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n\r\n      <el-dialog title=\"成员列表\" :visible.sync=\"dialogTableVisible\">\r\n        <el-table :data=\"members\">\r\n          <el-table-column property=\"uid\" label=\"成员ID\" width=\"150\"></el-table-column>\r\n          <el-table-column property=\"mail\" label=\"成员邮箱\" width=\"200\"></el-table-column>\r\n          <el-table-column property=\"uname\" label=\"姓名\" width=\"150\"></el-table-column>\r\n          <el-table-column property=\"owner\" label=\"是否具有管理权限\" width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.owner ? '是' : '否' }}</span>\r\n          </template></el-table-column>\r\n        </el-table>\r\n      </el-dialog>\r\n\r\n\r\n      <el-dialog title=\"删除成员\" :visible.sync=\"deleteDialogTableVisible\" width=\"60%\">\r\n        <el-table :data=\"members\">\r\n          <el-table-column property=\"uid\" label=\"成员ID\" width=\"150\"></el-table-column>\r\n          <el-table-column property=\"mail\" label=\"成员邮箱\" width=\"200\"></el-table-column>\r\n          <el-table-column property=\"uname\" label=\"姓名\" width=\"150\"></el-table-column>\r\n          <el-table-column property=\"owner\" label=\"是否具有管理权限\" width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.row.owner ? '是' : '否' }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column>\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"primary\" icon=\"el-icon-delete\" v-show=\"!scope.row.owner\" @click=\"deleteMember(scope.row)\">删除成员</el-button>\r\n            </template>\r\n          </el-table-column>\r\n\r\n        </el-table>\r\n      </el-dialog>\r\n\r\n      <el-dialog title=\"添加成员\" :visible.sync=\"addDialogTableVisible\" width=\"500px\">\r\n        <el-form :model=\"addParams\" label-width=\"120px\">\r\n          <el-form-item label=\"摄像头ID:\">\r\n            <span>{{ addParams.cID }}</span>\r\n          </el-form-item>\r\n          <el-form-item label=\"邮箱\">\r\n            <el-input v-model=\"addParams.mail\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"addCancel\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"addMember\">确定</el-button>\r\n    </span>\r\n      </el-dialog>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      dialogTableVisible:false,\r\n      deleteDialogTableVisible:false,\r\n      addDialogTableVisible:false,\r\n      confirmDelete:false,\r\n      selectedCid:'',\r\n      cameraID: '',\r\n      cameras:[],\r\n      members:[],\r\n      deleteParams:{cID:'',uID:''},\r\n      addParams:{cID:'',mail:''},\r\n    }\r\n  },\r\n  methods:{\r\n    async search(){\r\n      if(this.cameraID===''){\r\n        try {\r\n          const response = await axios.get(\"http://116.204.11.171:8080/cameras\");\r\n          this.cameras = response.data.data;\r\n          console.log(this.cameras);\r\n          this.cameraID='';\r\n        }catch (e) {\r\n          console.error(e);\r\n        }\r\n      }\r\n    },\r\n    async viewMembers(row) {\r\n      // 在这里访问 row 对象，执行查看成员的操作\r\n      console.log('查看成员', row);\r\n      try {\r\n        const response = await axios.get(\"http://116.204.11.171:8080/members\",{\r\n          params:{\r\n            cID:row.cid,\r\n          }\r\n        });\r\n        this.members = response.data.data;\r\n        this.dialogTableVisible=true;\r\n      }catch (e) {\r\n        console.error(e);\r\n      }\r\n    },\r\n    showAddMemberDialog(row){\r\n      this.addDialogTableVisible = true;\r\n      this.addParams.cID = row.cid;\r\n      console.log(this.addParams);\r\n    },\r\n\r\n\r\n    async addMember() {\r\n      // 在这里访问 row 对象，执行添加成员的操作\r\n      console.log('添加成员');\r\n      console.log(this.addParams);\r\n      var params = new URLSearchParams();\r\n      params.append(\"cID\",this.addParams.cID);\r\n      params.append(\"mail\",this.addParams.mail);\r\n      try {\r\n        const response = await axios.post(\"http://116.204.11.171:8080/addMember\",params);\r\n        if(response.data.code===1){\r\n          alert(\"添加成功\");\r\n          this.addParams = {cID:'',mail:''};\r\n        }else {\r\n          alert(\"添加失败\"+response.data.msg);\r\n        }\r\n      }catch (e) {\r\n        console.error(e);\r\n      }\r\n    },\r\n\r\n\r\n    addCancel(){\r\n      this.addDialogTableVisible = false;\r\n    },\r\n    async showDeleteDialog(row){\r\n      this.deleteDialogTableVisible = true;\r\n      this.deleteParams.cID = row.cid;\r\n      console.log(this.members);\r\n      try {\r\n        const response = await axios.get(\"http://116.204.11.171:8080/members\",{\r\n          params:{\r\n            cID:row.cid,\r\n          }\r\n        });\r\n        this.members = response.data.data;\r\n      }catch (e) {\r\n        console.error(e);\r\n      }\r\n    },\r\n    async deleteMember(row) {\r\n      // 在这里访问 row 对象，执行删除成员的操作\r\n      console.log('删除成员', row);\r\n      this.deleteParams.uID=row.uid;\r\n      console.log(this.deleteParams);\r\n      try {\r\n        const response = await axios.delete(\"http://116.204.11.171:8080/delMember\",\r\n            { params: { cID: this.deleteParams.cID, uID: this.deleteParams.uID }} );\r\n        if(response.data.code===1){\r\n          alert(\"删除成功\");\r\n        }else {\r\n          alert(\"删除失败\");\r\n        }\r\n      }catch (e) {\r\n        console.error(e);\r\n      }\r\n    },\r\n\r\n  },\r\n  created(){\r\n    this.search();\r\n  },\r\n}\r\n</script>\r\n\r\n\r\n\r\n<style scoped>\r\n.text {\r\n  font-size: 14px;\r\n}\r\n\r\n.item {\r\n  margin-bottom: 18px;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both\r\n}\r\n\r\n.box-card {\r\n  width: 100%; /* 或根据需要设置其他适合的宽度 */\r\n}\r\n\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}