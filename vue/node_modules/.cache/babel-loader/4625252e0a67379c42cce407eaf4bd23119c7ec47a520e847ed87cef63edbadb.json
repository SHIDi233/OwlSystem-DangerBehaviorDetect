{"ast":null,"code":"import \"core-js/modules/web.url-search-params.size.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport global from './GlobalPage.vue';\nconst restweburl = global.ip;\nexport default {\n  data() {\n    //message: 'Hello Vue.js!'\n    return {\n      ac: \"\",\n      pw: \"\"\n    };\n  },\n  methods: {\n    getValue: function () {\n      // 获取message变量值将其转换成数组，逆转后再链接，再赋值给message\n      // alert(\"登录\");\n      // var a = this.ac;\n      // var p = this.pw;\n      // alert(a);\n      // alert(p);\n\n      var params = new URLSearchParams();\n      params.append('mail', this.ac);\n      params.append('password', this.pw);\n      axios.post(restweburl + 'login', params).then(response => {\n        console.log(response.data);\n        // var obj = JSON.parse(response.data);\n        // console.log(obj)\n        if (response.data.code == 1) {\n          window.localStorage.setItem(\"CCNtoken\", response.data.data);\n          // alert(window.localStorage.getItem(\"CCNtoken\"));\n          this.$router.push('/home/projectsBox');\n        } else {\n          alert(\"密码错误\");\n        }\n      }).catch(error => {\n        alert(error);\n        alert(\"请求失败\");\n      });\n    },\n    register: function () {\n      // 获取message变量值将其转换成数组，逆转后再链接，再赋值给message\n      // alert(\"注册\");\n      this.$router.push('/register');\n    }\n  }\n};","map":{"version":3,"names":["axios","global","restweburl","ip","data","ac","pw","methods","getValue","params","URLSearchParams","append","post","then","response","console","log","code","window","localStorage","setItem","$router","push","alert","catch","error","register"],"sources":["src/components/LoginPage.vue"],"sourcesContent":["<style src=\"./css/login.css\" scoped></style>\r\n<template>\r\n    <body>\r\n        <el-form-item prop=\"username\">\r\n        <span class=\"svg-container\">\r\n          <svg-icon icon-class=\"user\" />\r\n        </span>\r\n        <el-input\r\n          ref=\"username\"\r\n          v-model=\"loginForm.username\"\r\n          placeholder=\"用户名\"\r\n          name=\"username\"\r\n          type=\"text\"\r\n          tabindex=\"1\"\r\n          auto-complete=\"on\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"password\">\r\n        <span class=\"svg-container\">\r\n          <svg-icon icon-class=\"password\" />\r\n        </span>\r\n        <el-input\r\n          :key=\"passwordType\"\r\n          ref=\"password\"\r\n          v-model=\"loginForm.password\"\r\n          :type=\"passwordType\"\r\n          placeholder=\"密码\"\r\n          name=\"password\"\r\n          tabindex=\"2\"\r\n          auto-complete=\"on\"\r\n          @keyup.enter.native=\"handleLogin\"\r\n        />\r\n        <span class=\"show-pwd\" @click=\"showPwd\">\r\n          <svg-icon :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\" />\r\n        </span>\r\n      </el-form-item>\r\n\r\n      <el-button :loading=\"loading\" type=\"primary\" style=\"width:100%;margin-bottom:30px;\" @click.native.prevent=\"handleLogin\">登陆</el-button>\r\n\r\n      <div class=\"tips\">\r\n        <span style=\"margin-right:20px;\" />\r\n        <span />\r\n      </div>\r\n      <div class=\"login\">\r\n          <div class=\"box\">\r\n              <p class=\"table\">Git CCN</p>\r\n              <br>\r\n              <input id=\"account\" type=\"text\" placeholder=\"账号\" value=\"\" v-model=\"ac\">\r\n              <input id=\"pwd\" type=\"password\" placeholder=\"密码\" value=\"\" v-model=\"pw\" >\r\n              \r\n              <a href=\"#\" class=\"go\" v-on:click=\"getValue\">登录</a>\r\n              <a href=\"#\" class=\"go\" v-on:click=\"register\">注册</a>\r\n              <br>\r\n          </div>\r\n      </div>\r\n    </body>\r\n</template>\r\n\r\n<script>\r\n    import axios from 'axios'\r\n    import global from './GlobalPage.vue'\r\n    const restweburl = global.ip;\r\n    export default {\r\n        data() {\r\n            //message: 'Hello Vue.js!'\r\n            return{\r\n                ac:\"\",\r\n                pw:\"\"\r\n            }\r\n        },\r\n        methods: {\r\n            getValue: function () {\r\n                // 获取message变量值将其转换成数组，逆转后再链接，再赋值给message\r\n                // alert(\"登录\");\r\n                // var a = this.ac;\r\n                // var p = this.pw;\r\n                // alert(a);\r\n                // alert(p);\r\n\r\n                var params = new URLSearchParams();\r\n                params.append('mail',this.ac);\r\n                params.append('password',this.pw);\r\n\r\n                axios.post(restweburl+'login', params).then(response => {\r\n                    console.log(response.data)\r\n                    // var obj = JSON.parse(response.data);\r\n                    // console.log(obj)\r\n                    if(response.data.code==1){\r\n                        window.localStorage.setItem(\"CCNtoken\",response.data.data);\r\n                        // alert(window.localStorage.getItem(\"CCNtoken\"));\r\n                        this.$router.push('/home/projectsBox');\r\n                    }\r\n                    else{\r\n                        alert(\"密码错误\")\r\n                    }\r\n                }).catch(error => {\r\n                    alert(error)\r\n                    alert(\"请求失败\")\r\n                })\r\n            },\r\n            register: function () {\r\n                // 获取message变量值将其转换成数组，逆转后再链接，再赋值给message\r\n                // alert(\"注册\");\r\n                this.$router.push('/register')\r\n            }\r\n        }\r\n    }\r\n</script>\r\n"],"mappings":";;AA4DA,OAAAA,KAAA;AACA,OAAAC,MAAA;AACA,MAAAC,UAAA,GAAAD,MAAA,CAAAE,EAAA;AACA;EACAC,KAAA;IACA;IACA;MACAC,EAAA;MACAC,EAAA;IACA;EACA;EACAC,OAAA;IACAC,QAAA,WAAAA,CAAA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA,IAAAC,MAAA,OAAAC,eAAA;MACAD,MAAA,CAAAE,MAAA,cAAAN,EAAA;MACAI,MAAA,CAAAE,MAAA,kBAAAL,EAAA;MAEAN,KAAA,CAAAY,IAAA,CAAAV,UAAA,YAAAO,MAAA,EAAAI,IAAA,CAAAC,QAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,QAAA,CAAAV,IAAA;QACA;QACA;QACA,IAAAU,QAAA,CAAAV,IAAA,CAAAa,IAAA;UACAC,MAAA,CAAAC,YAAA,CAAAC,OAAA,aAAAN,QAAA,CAAAV,IAAA,CAAAA,IAAA;UACA;UACA,KAAAiB,OAAA,CAAAC,IAAA;QACA,OACA;UACAC,KAAA;QACA;MACA,GAAAC,KAAA,CAAAC,KAAA;QACAF,KAAA,CAAAE,KAAA;QACAF,KAAA;MACA;IACA;IACAG,QAAA,WAAAA,CAAA;MACA;MACA;MACA,KAAAL,OAAA,CAAAC,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}